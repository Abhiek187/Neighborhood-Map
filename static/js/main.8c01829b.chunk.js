(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,n){e.exports=n.p+"static/media/menu.9ed676bf.svg"},147:function(e){e.exports=[{id:"costco",title:"Costco",position:{lat:40.436565,lng:-74.507282}},{id:"crystal-springs-family-waterpark",title:"Crystal Springs Family Waterpark",position:{lat:40.408711,lng:-74.445983}},{id:"milltown-ice-cream-depot",title:"Milltown Ice Cream Depot",position:{lat:40.453293,lng:-74.434404}},{id:"pro-skate-nj",title:"Pro Skate NJ",position:{lat:40.415439,lng:-74.528226}},{id:"regal-cinemas-commerece-center-18",title:"Regal Cinemas Commerce Center 18",position:{lat:40.443312,lng:-74.503794}}]},148:function(e,t,n){e.exports=n(356)},153:function(e,t,n){},159:function(e,t,n){},356:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(60),r=n.n(i),s=(n(153),n(39)),l=n(28),c=n(29),u=n(31),m=n(30),d=n(32),g=n(143),p=n.n(g),f=n(86),h=n.n(f),w=(n(159),n(144)),v=n.n(w),b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",isHidden:!0},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.markers,a=t.onToggleInfoWindow,i=t.onFilterLocations,r=this.state,s=r.query,l=r.isHidden;return o.a.createElement("div",{className:l?"list-view hidden":"list-view"},o.a.createElement("div",{className:"list-side"},o.a.createElement("input",{className:"list-toggle",type:"image",src:v.a,alt:l?"Show list view":"Hide list view",onClick:function(){return e.setState({isHidden:!l})}})),o.a.createElement("div",{className:l?"list-main hidden":"list-main"},o.a.createElement("h1",{className:"list-title",tabIndex:0},"Neighborhood Map"),o.a.createElement("form",{className:"list-form",onSubmit:function(e){return i(e,s)}},o.a.createElement("input",{className:"list-search",type:"text",placeholder:"Search location",onChange:function(t){return e.setState({query:t.target.value})}}),o.a.createElement("input",{className:"list-submit",type:"submit",value:"Search"})),o.a.createElement("ul",{className:"list-locations"},n.filter(function(e){return e.isVisible}).map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement("button",{className:e.showInfo?"list-button selected":"list-button",type:"button",onClick:function(){return a(e)}},e.title),o.a.createElement("hr",null))}))))}}]),t}(a.Component),k=n(38),E=Object(k.withGoogleMap)(function(e){return o.a.createElement(k.GoogleMap,{defaultCenter:{lat:40.441643,lng:-74.51179},defaultZoom:12},e.markers.map(function(t){return o.a.createElement(k.Marker,{key:t.id,title:t.title,position:t.position,animation:t.animation,visible:t.isVisible,onClick:function(){return e.onToggleInfoWindow(t)}},t.showInfo&&o.a.createElement(k.InfoWindow,{onCloseClick:function(){return e.onToggleInfoWindow(t)}},t.url?o.a.createElement("div",{key:t.id,className:"marker-window"},o.a.createElement("a",{className:"marker-url",href:t.url},t.title),o.a.createElement("img",{className:"marker-image",src:t.image,alt:t.title,tabIndex:0}),o.a.createElement("a",{className:"marker-yelp",href:"https://www.yelp.com"},"Yelp Reviews"),t.reviews?t.reviews.map(function(e){return o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement("h3",{className:"marker-rating",tabIndex:0},"Rating: ",e.rating),o.a.createElement("p",{className:"marker-review",tabIndex:0},e.text))}):o.a.createElement("h3",{className:"error-message",tabIndex:0},"Error! Yelp reviews were unable to load.")):o.a.createElement("h3",{className:"error-message",tabIndex:0},"Error! Yelp could not find the location selected.")))}))});window.gm_authFailure=function(){alert("Google Maps authentication failed.")};var y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.markers,n=e.onToggleInfoWindow;return o.a.createElement(E,{loadingElement:o.a.createElement("div",{className:"map-loading"}),containerElement:o.a.createElement("div",{className:"map-container"}),mapElement:o.a.createElement("div",{className:"map",role:"application",tabIndex:0,"aria-label":"Map of neighborhood"}),markers:t,onToggleInfoWindow:n})}}]),t}(a.Component),N=n(147),I="https://cors-anywhere.herokuapp.com/",O="Bearer 5gHT0N2H91kvYB8spnGJj0SD4Cub-O1qp35smS1pSrs0BFyGEayFl6W7AZWROPauJ2TU5gOcm2B1OtxadbNvCb0hcu_PFngOKC1f5a4QzgI5lR1gt2WeZoBa7zNeW3Yx",j=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={markers:JSON.parse(JSON.stringify(N)),willLoad:!0},n.getBusiness=function(e){return h.a.ajax({url:I+"https://api.yelp.com/v3/businesses/search?latitude=".concat(e.position.lat)+"&longitude=".concat(e.position.lng,"&term=").concat(e.title),headers:{Authorization:O}})},n.getReviews=function(e){return h.a.ajax({url:I+"https://api.yelp.com/v3/businesses/".concat(e,"/reviews"),headers:{Authorization:O}})},n.toggleInfoWindow=function(e){var t=Object(s.a)(n.state.markers);(e=t.filter(function(t){return t.id===e.id})[0]).showInfo=!e.showInfo,e.animation=e.showInfo&&google?google.maps.Animation.BOUNCE:null,n.setState({markers:t})},n.filterLocations=function(e,t){e.preventDefault();var a=Object(s.a)(n.state.markers);a.map(function(e){return!e.isVisible&&google&&(e.animation=google.maps.Animation.DROP),e.isVisible=e.title.toLowerCase().includes(t.toLowerCase()),e.isVisible||(e.showInfo=!1,e.animation=null),e}),n.setState({markers:a})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.isScriptLoaded,a=e.isScriptLoadSucceed;if(n&&!this.props.isScriptLoaded)if(a){var o=Object(s.a)(this.state.markers);o.map(function(e){return e.animation=google?google.maps.Animation.DROP:null,e.showInfo=!1,e.isVisible=!0,document.addEventListener("keyup",function(n){return n.target.title===e.title&&13===n.keyCode&&t.toggleInfoWindow(e)}),t.getBusiness(e).done(function(n){e.id=n.businesses[0].id,e.url=n.businesses[0].url,e.image=n.businesses[0].image_url,t.getReviews(e.id).done(function(t){e.reviews=[];var n=!0,a=!1,o=void 0;try{for(var i,r=t.reviews[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var s=i.value;e.reviews.push({id:s.id,rating:s.rating,text:s.text})}}catch(l){a=!0,o=l}finally{try{n||null==r.return||r.return()}finally{if(a)throw o}}}).fail(function(e,t,n){return console.error("Error: ".concat(n))})}).fail(function(e,t,n){return console.error("Error: ".concat(n))}),e}),this.setState({markers:o})}else this.setState({willLoad:!1})}},{key:"render",value:function(){var e=this.props.isScriptLoadSucceed,t=this.state,n=t.markers,a=t.willLoad;Object(s.a)(document.querySelectorAll(".gmnoprint")).slice(0,n.length).map(function(e){return e.tabIndex=0});var i=a?o.a.createElement("p",{className:"loading"},"Loading..."):o.a.createElement("h1",{className:"error-message google",tabIndex:0},"Error! Google Maps was unable to load.");return o.a.createElement("div",{className:"App"},o.a.createElement(b,{markers:n,onToggleInfoWindow:this.toggleInfoWindow,onFilterLocations:this.filterLocations}),e?o.a.createElement(y,{markers:n,onToggleInfoWindow:this.toggleInfoWindow}):i)}}]),t}(a.Component),S=p()("https://maps.googleapis.com/maps/api/js?key=AIzaSyAgW5OHRMNIfawf6DfY_UpnK1MqtJyN87E&v=3")(j),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(S,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/Neighborhood-Map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/Neighborhood-Map","/service-worker.js");C?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):W(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):W(e)})}}()}},[[148,2,1]]]);
//# sourceMappingURL=main.8c01829b.chunk.js.map