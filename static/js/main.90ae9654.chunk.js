(this["webpackJsonpneighborhood-map"]=this["webpackJsonpneighborhood-map"]||[]).push([[0],{149:function(e){e.exports=JSON.parse('[{"id":"central-park-zoo","title":"Central Park Zoo","position":{"lat":40.77043433701936,"lng":-73.97219181285352}},{"id":"empire-state-building","title":"Empire State Building","position":{"lat":40.75132090183999,"lng":-73.98523807665711}},{"id":"liberty-science-center","title":"Liberty Science Center","position":{"lat":40.71069957584075,"lng":-74.05509811669441}},{"id":"joey-pepperoni-pizza","title":"Joey Pepperoni\'s Pizza","position":{"lat":40.71824995143393,"lng":-74.00313689336635}},{"id":"museum-of-ice-cream-nyc","title":"Museum of Ice Cream NYC","position":{"lat":40.72389986810587,"lng":-73.99895725974783}}]')},154:function(e,t,n){},159:function(e,t,n){},356:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),a=n(61),r=n.n(a),s=(n(154),n(145)),c=n(41),l=n(29),u=n(30),d=n(32),m=n(31),p=n(146),g=n.n(p),h=n(87),f=n.n(h),b=(n(159),n.p+"static/media/menu.8246383d.svg"),j=n(1),v=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={query:"",isHidden:!0},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.markers,i=t.onToggleInfoWindow,o=t.onFilterLocations,a=this.state,r=a.query,s=a.isHidden;return Object(j.jsxs)("div",{className:s?"list-view hidden":"list-view",children:[Object(j.jsx)("div",{className:"list-side",children:Object(j.jsx)("input",{className:"list-toggle",type:"image",src:b,alt:s?"Show list view":"Hide list view",onClick:function(){return e.setState({isHidden:!s})}})}),Object(j.jsxs)("div",{className:s?"list-main hidden":"list-main",children:[Object(j.jsx)("h1",{className:"list-title",tabIndex:0,children:"Neighborhood Map"}),Object(j.jsxs)("form",{className:"list-form",onSubmit:function(e){return o(e,r)},children:[Object(j.jsx)("input",{className:"list-search",type:"text",placeholder:"Search location",onChange:function(t){return e.setState({query:t.target.value})}}),Object(j.jsx)("input",{className:"list-submit",type:"submit",value:"Search"})]}),Object(j.jsx)("ul",{className:"list-locations",children:n.filter((function(e){return e.isVisible})).map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)("button",{className:e.showInfo?"list-button selected":"list-button",type:"button",onClick:function(){return i(e)},children:e.title}),Object(j.jsx)("hr",{})]},e.id)}))})]})]})}}]),n}(i.Component),w=n(40),O=Object(w.withGoogleMap)((function(e){return Object(j.jsx)(w.GoogleMap,{defaultCenter:{lat:40.73971790095217,lng:-74.01005037971146},defaultZoom:13,children:e.markers.map((function(t){return Object(j.jsx)(w.Marker,{title:t.title,position:t.position,animation:t.animation,visible:t.isVisible,onClick:function(){return e.onToggleInfoWindow(t)},children:t.showInfo&&Object(j.jsx)(w.InfoWindow,{onCloseClick:function(){return e.onToggleInfoWindow(t)},children:t.url?Object(j.jsxs)("div",{className:"marker-window",children:[Object(j.jsx)("a",{className:"marker-url",href:t.url,children:t.title}),Object(j.jsx)("img",{className:"marker-image",src:t.image,alt:t.title,tabIndex:0}),Object(j.jsx)("a",{className:"marker-yelp",href:"https://www.yelp.com",children:"Yelp Reviews"}),t.reviews?t.reviews.map((function(e){return Object(j.jsxs)(o.a.Fragment,{children:[Object(j.jsxs)("h3",{className:"marker-rating",tabIndex:0,children:["Rating: ",e.rating]}),Object(j.jsx)("p",{className:"marker-review",tabIndex:0,children:e.text})]},e.id)})):Object(j.jsx)("h3",{className:"error-message",tabIndex:0,children:"Error! Yelp reviews were unable to load."})]},t.id):Object(j.jsx)("h3",{className:"error-message",tabIndex:0,children:"Error! Yelp could not find the location selected."})})},t.id)}))})}));window.gm_authFailure=function(){alert("Google Maps authentication failed.")};var x=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.markers,n=e.onToggleInfoWindow;return Object(j.jsx)(O,{loadingElement:Object(j.jsx)("div",{className:"map-loading"}),containerElement:Object(j.jsx)("div",{className:"map-container"}),mapElement:Object(j.jsx)("div",{className:"map",role:"application",tabIndex:0,"aria-label":"Map of neighborhood"}),markers:t,onToggleInfoWindow:n})}}]),n}(i.Component),k=n(149),y="https://cors-anywhere.herokuapp.com/",N="Bearer 5gHT0N2H91kvYB8spnGJj0SD4Cub-O1qp35smS1pSrs0BFyGEayFl6W7AZWROPauJ2TU5gOcm2B1OtxadbNvCb0hcu_PFngOKC1f5a4QzgI5lR1gt2WeZoBa7zNeW3Yx",I=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={markers:JSON.parse(JSON.stringify(k)),willLoad:!0},e.getBusiness=function(e){return f.a.ajax({url:y+"https://api.yelp.com/v3/businesses/search?latitude=".concat(e.position.lat)+"&longitude=".concat(e.position.lng,"&term=").concat(e.title),headers:{Authorization:N}})},e.getReviews=function(e){return f.a.ajax({url:y+"https://api.yelp.com/v3/businesses/".concat(e,"/reviews"),headers:{Authorization:N}})},e.toggleInfoWindow=function(t){var n=Object(c.a)(e.state.markers);(t=n.filter((function(e){return e.id===t.id}))[0]).showInfo=!t.showInfo,t.animation=t.showInfo&&google?google.maps.Animation.BOUNCE:null,e.setState({markers:n})},e.filterLocations=function(t,n){t.preventDefault();var i=Object(c.a)(e.state.markers);i.map((function(e){return!e.isVisible&&google&&(e.animation=google.maps.Animation.DROP),e.isVisible=e.title.toLowerCase().includes(n.toLowerCase()),e.isVisible||(e.showInfo=!1,e.animation=null),e})),e.setState({markers:i})},e}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.isScriptLoaded,i=e.isScriptLoadSucceed;if(n&&!this.props.isScriptLoaded)if(i){var o=Object(c.a)(this.state.markers);o.map((function(e){return e.animation=google?google.maps.Animation.DROP:null,e.showInfo=!1,e.isVisible=!0,document.addEventListener("keyup",(function(n){return n.target.title===e.title&&13===n.keyCode&&t.toggleInfoWindow(e)})),t.getBusiness(e).done((function(n){e.id=n.businesses[0].id,e.url=n.businesses[0].url,e.image=n.businesses[0].image_url,t.getReviews(e.id).done((function(t){e.reviews=[];var n,i=Object(s.a)(t.reviews);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.reviews.push({id:o.id,rating:o.rating,text:o.text})}}catch(a){i.e(a)}finally{i.f()}})).fail((function(e,t,n){return console.error("Error: ".concat(n))}))})).fail((function(e,t,n){return console.error("Error: ".concat(n))})),e})),this.setState({markers:o})}else this.setState({willLoad:!1})}},{key:"render",value:function(){var e=this.props.isScriptLoadSucceed,t=this.state,n=t.markers,i=t.willLoad;Object(c.a)(document.querySelectorAll(".gmnoprint")).slice(0,n.length).map((function(e){return e.tabIndex=0}));var o=i?Object(j.jsx)("p",{className:"loading",children:"Loading..."}):Object(j.jsx)("h1",{className:"error-message google",tabIndex:0,children:"Error! Google Maps was unable to load."});return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(v,{markers:n,onToggleInfoWindow:this.toggleInfoWindow,onFilterLocations:this.filterLocations}),e?Object(j.jsx)(x,{markers:n,onToggleInfoWindow:this.toggleInfoWindow}):o]})}}]),n}(i.Component),S=g()("https://maps.googleapis.com/maps/api/js?key=AIzaSyAgW5OHRMNIfawf6DfY_UpnK1MqtJyN87E&v=3")(I),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(j.jsx)(S,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/Neighborhood-Map",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/Neighborhood-Map","/service-worker.js");C?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):W(e)}))}}()}},[[356,1,2]]]);
//# sourceMappingURL=main.90ae9654.chunk.js.map